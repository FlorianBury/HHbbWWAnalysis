path: 
  2016:
    # DL #
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2016NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2016NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved2B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2016NanoV7_NonResonant_DNN11_Fake_DYEstimation_Boosted1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2016NanoV7_NonResonant_DNN11_Fake_DYEstimation_GGFNLO_Benchmark{BM}
    # SL #
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2016NanoV7_TTHIDLoose_Fake_DNNSL01_Boosted
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2016NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved1B
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2016NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved2B
    - /nfs/scratch/fynu/gsaha/SL_EFT_Syst/full2016NanoV7_TTHIDLoose_Fake_SL_DNN01_GGFNLO_Benchmark{BM}
  2017:
    # DL #
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2017NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2017NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved2B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2017NanoV7_NonResonant_DNN11_Fake_DYEstimation_Boosted1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2017NanoV7_NonResonant_DNN11_Fake_DYEstimation_GGFNLO_Benchmark{BM}
    # SL #
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2017NanoV7_TTHIDLoose_Fake_DNNSL01_Boosted
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2017NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved1B
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2017NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved2B
    - /nfs/scratch/fynu/gsaha/SL_EFT_Syst/full2017NanoV7_TTHIDLoose_Fake_SL_DNN01_GGFNLO_Benchmark{BM}
  2018:
    # DL #
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2018NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2018NanoV7_NonResonant_DNN11_Fake_DYEstimation_Resolved2B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2018NanoV7_NonResonant_DNN11_Fake_DYEstimation_Boosted1B
    - /nfs/scratch/fynu/fbury/BambooOutputHHtobbWW/full2018NanoV7_NonResonant_DNN11_Fake_DYEstimation_GGFNLO_Benchmark{BM}
    # SL #
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2018NanoV7_TTHIDLoose_Fake_DNNSL01_Boosted
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2018NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved1B
    - /nfs/scratch/fynu/gsaha/PlotNoSyst2018SL_Debug/full2018NanoV7_TTHIDLoose_Fake_DNNSL01_Resolved2B
    - /nfs/scratch/fynu/gsaha/SL_EFT_Syst/full2018NanoV7_TTHIDLoose_Fake_SL_DNN01_GGFNLO_Benchmark{BM}

outputDir: /home/ucl/cp3/fbury/scratch/Datacards/bbww/NonResonant/datacard_fit_NonResonant_BM_GGFNLO_{BM}_syst_FR2/

use_syst: True

textfiles: datacard_{BM}_{}.txt

yamlName: 
  - plots_DYEstimation_FakeExtrapolation.yml
  - plots_FakeExtrapolation.yml
  - plots.yml

produce_plots: True

era: 
  - 2016
  - 2017
  - 2018

combineConfigs: 
  limits_combined:
    mode: limits
    command: "combine -M AsymptoticLimits -t -1"
    submit :  
      time: '0-12:00:00'
      mem : 9000
    bins:
      - HH_DL_resolved1b_GGF
      - HH_DL_resolved2b_GGF
      - HH_DL_boosted_GGF
      - HH_DL_resolved1b_VBF
      - HH_DL_resolved2b_VBF
      - HH_DL_boosted_VBF
      - HH_DL_inclusive_DY_VVV
      - HH_DL_resolved_other
      - HH_DL_boosted_other 
      - HH_SL_resolved1b_GGF
      - HH_SL_resolved2b_GGF
      - HH_SL_boosted_GGF
      - HH_SL_resolved1b_VBF
      - HH_SL_resolved2b_VBF
      - HH_SL_boosted_VBF
      - HH_SL_inclusive_WJets
      - HH_SL_inclusive_other
      - HH_SL_resolved_TopH
      - HH_SL_boosted_TopH
  limits_DL:
    mode: limits
    command: "combine -M AsymptoticLimits -t -1"
    submit :  
      time: '0-12:00:00'
      mem : 9000
    bins:
      - HH_DL_resolved1b_GGF
      - HH_DL_resolved2b_GGF
      - HH_DL_boosted_GGF
      - HH_DL_resolved1b_VBF
      - HH_DL_resolved2b_VBF
      - HH_DL_boosted_VBF
      - HH_DL_inclusive_DY_VVV
      - HH_DL_resolved_other
      - HH_DL_boosted_other 
  limits_SL:
    mode: limits
    command: "combine -M AsymptoticLimits -t -1"
    submit :  
      time: '0-12:00:00'
      mem : 9000
    bins:
      - HH_SL_resolved1b_GGF
      - HH_SL_resolved2b_GGF
      - HH_SL_boosted_GGF
      - HH_SL_resolved1b_VBF
      - HH_SL_resolved2b_VBF
      - HH_SL_boosted_VBF
      - HH_SL_inclusive_WJets
      - HH_SL_inclusive_other
      - HH_SL_resolved_TopH
      - HH_SL_boosted_TopH




legend:
  position:
  - 0.2
  - 0.7
  - 0.9
  - 0.9
  columns: 3

normSyst  : !include norm_comb_nonres.yml

shapeSyst  : !include shape_comb_systematics.yml

rebin: !include rebin_comb_nonresonant_BM.yml
  
histCorrections: !include nonclosure_nonres.yml

histConverter: !include cat_comb_nonresonant.yml
  
groups:
  2016:
    - !include groups_bkg_2016.yml
    - !include groups_Fakes_2016.yml
    - !include groups_data_2016.yml
    - !include groups_COMB_BM_qqHH.yml
    - ggHH_BM_{BM}_hbbhww:
        type: signal
        legend: HH bbWW GGF (BM {BM}) 
        order: 14
        line-color: '#288a24'
        fill-color: '#288a24'
        line-type: 1
        line-width: 2
        fill-type: 3345
        files:
          - cat: [".*SL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
              - GluGluToHHTo2B2VLNu2J_NLOBenchmark{BM}.root
          - cat: [".*DL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
      ggHH_BM_{BM}_hbbhtt:
        type: signal
        legend: HH bb#tau#tau GGF (BM {BM}) 
        order: 14
        line-color: '#c91a26'
        line-type: 1
        fill-color: '#c91a26'
        line-width: 2
        fill-type: 3354
        files:
          - GluGluToHHTo2B2Tau_NLOBenchmark{BM}.root

  2017:
    - !include groups_bkg_2017.yml
    - !include groups_Fakes_2017.yml
    - !include groups_data_2017.yml
    - !include groups_COMB_BM_qqHH.yml
    - ggHH_BM_{BM}_hbbhww:
        type: signal
        legend: HH bbWW GGF (BM {BM}) 
        order: 14
        line-color: '#288a24'
        fill-color: '#288a24'
        line-type: 1
        line-width: 2
        fill-type: 3345
        files:
          - cat: [".*SL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
              - GluGluToHHTo2B2VLNu2J_NLOBenchmark{BM}.root
          - cat: [".*DL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
      ggHH_BM_{BM}_hbbhtt:
        type: signal
        legend: HH bb#tau#tau GGF (BM {BM}) 
        order: 14
        line-color: '#c91a26'
        line-type: 1
        fill-color: '#c91a26'
        line-width: 2
        fill-type: 3354
        files:
          - GluGluToHHTo2B2Tau_NLOBenchmark{BM}.root
  2018:
    - !include groups_bkg_2018.yml
    - !include groups_Fakes_2018.yml
    - !include groups_data_2018.yml
    - !include groups_COMB_BM_qqHH.yml
    - ggHH_BM_{BM}_hbbhww:
        type: signal
        legend: HH bbWW GGF (BM {BM}) 
        order: 14
        line-color: '#288a24'
        fill-color: '#288a24'
        line-type: 1
        line-width: 2
        fill-type: 3345
        files:
          - cat: [".*SL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
              - GluGluToHHTo2B2VLNu2J_NLOBenchmark{BM}.root
          - cat: [".*DL.*"]
            files:
              - GluGluToHHTo2B2VTo2L2Nu_NLOBenchmark{BM}.root
      ggHH_BM_{BM}_hbbhtt:
        type: signal
        legend: HH bb#tau#tau GGF (BM {BM}) 
        order: 14
        line-color: '#c91a26'
        line-type: 1
        fill-color: '#c91a26'
        line-width: 2
        fill-type: 3354
        files:
          - GluGluToHHTo2B2Tau_NLOBenchmark{BM}.root

